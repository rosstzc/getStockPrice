
# 项目：股票价格形态分析项目
## 项目介绍

这个项目源于当时刚开始学习股票投资，看了一些书比如《交易为生》，里面提到各种基于股票图形分析的交易信号，所以自己希望通过程序来帮助分析股票图形数据，从而筛选出有信号的股票，举几个信号例子：macd的bar柱背离，股价突破ATR通道、macd的bar柱从向下转向上、价格突破止损线、周股价偏离ema过大… 以上随便举几个例子，因为实际过程经过一段时间，也反复尝试各种信号（说明：这些信号是否靠谱，不在本项目讨论范围）。

实现了输出信号后，需要用图表呈现信号，方便理解和判断。之后为了验证基于信号的买卖策略是否靠谱，实现通过历史数据来测试基于这些信号的交易策略的成功率和盈亏情况。

以上基本上就是这个项目实现的功能，由于这是个人项目，而且是不断迭代的项目，代码结构设计并不好，代码可读性比较差。

另外，之后较长时间对股票投资工具的了解，发现其实专业的股票投资工具能更好满足我对股票图形分析需求（只是当时自己并不了解）。所以一般个人投资者使用专业工具就可以，这些工具能提供各种分析和自定义功能，没必要费时间自己开发。当然也有些情况是比较特殊或个性化情况，比如我后来项目要做的板块的口袋支点股票数量分析，无法在专业股票工具获得，只好自己再开发。

## 项目实现步骤：

1. 通过api从股票数据平台获取所需股票的K线数据，并且保存到本地。
2. 对k线数据进行加工处理，比如计算移动平均线、macd、ATP通道、kdj、止损线等。
3. 实现各种的策略信号逻辑，比如macd bar柱背离，股价突破ATR通道、价格突破止损线…
4. 根据信号回测股票的历史数据，得到胜率和盈亏大概情况
5. 调用mplfinance画图库，生成股票价格图形和策略信号图片。
6. 导出各种策略的选股结果，导出excel列表。

## 应用到的技术：

1. panda：处理股票数据从读取到处理分析等所有工作。
2. mplfinance，生成每个股票的K线，macd等图形，并在图上标记各种策略信号

## 项目体会：

这个项目是我第一个学习并使用panda的项目，这是一个个想法不断迭代的项目，整个项目持续时间接近1年。整个项目代码6k行左右(不算多)，通过项目让我掌握到panda一些常用功能，比如，

- 数据选择方法:loc, iloc, iat, at, tail…
- 数据处理：tolist, drop, drop_duplicates, fillna, merge, append,  join,  groupby, set_index, Series…
- 文件处理：read_csv，to_excel…
- 画图：mplfinance

这个项目做得不好地方在于开始并没有充分考虑功能模块化，由于后续功能持续叠加，导致代码嵌套层次较多，不容易阅读和维护；另外在数据处理性能方面遇到挑战，数据处理逻辑和存储还有很多优化空间。

总的来说，作为自己第一个数据处理和分析项目，我从这里学到很多，业务上验证自己的想法，程序上让我掌握科学计算的一些基础知识和应用。

## 注意事项：

本项目是完整的开发项目，能够直接在本地运行，里面的功能逻辑和信号策略都是基于我的思考，其他人可能并不适用。若对项目感兴趣，可以下载到本地查看一下代码，提取一些可能有参考价值的代码或思路。

##项目相关图片


![1](https://user-images.githubusercontent.com/5052733/201301299-8123a445-9a17-4e50-802e-6c185fc53dc8.png)


![2-day chart](https://user-images.githubusercontent.com/5052733/201303918-5f20b3e6-8554-4645-b36b-d2721da5879d.png)

![3-day chart2](https://user-images.githubusercontent.com/5052733/201303951-b9ca45c1-139c-4225-8b44-7f93ebc3583d.png)


![3-chart-week](https://user-images.githubusercontent.com/5052733/201303991-b8f04936-53da-415f-9f59-c7dc71c22b91.png)

![6-excel](https://user-images.githubusercontent.com/5052733/201304066-8b4c1a3a-85bd-4fd4-be45-14f0c02e8ae0.png)

![5-周背离](https://user-images.githubusercontent.com/5052733/201304107-1ac514ed-1d91-47c3-95d1-a212b1a112ba.png)

![7-excel-周趋势向上](https://user-images.githubusercontent.com/5052733/201304139-2759bf86-6f10-400f-a1cb-3e8b1e7d3c3d.png)


